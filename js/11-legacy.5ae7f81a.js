"use strict";(self["webpackChunkvideosweb"]=self["webpackChunkvideosweb"]||[]).push([[11],{33011:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var o=n(56768),r=n(24232),i=n(45130),l={class:"text-h4 font-weight-bold"},a={key:0},u={key:1};function c(t,e,n,c,s,d){var f=(0,o.g2)("v-icon"),g=(0,o.g2)("v-divider"),m=(0,o.g2)("v-col"),v=(0,o.g2)("v-row"),h=(0,o.g2)("v-alert"),k=(0,o.g2)("v-img"),p=(0,o.g2)("v-card-title"),y=(0,o.g2)("v-card-subtitle"),b=(0,o.g2)("v-btn"),_=(0,o.g2)("v-card-actions"),F=(0,o.g2)("v-card"),x=(0,o.g2)("v-card-text"),W=(0,o.g2)("v-spacer"),w=(0,o.g2)("v-dialog"),D=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(D,null,{default:(0,o.k6)((function(){return[(0,o.bF)(v,{class:"mt-4 mb-4"},{default:(0,o.k6)((function(){return[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((function(){return[(0,o.Lk)("h2",l,[(0,o.bF)(f,{large:"",color:"primary",class:"mr-2"},{default:(0,o.k6)((function(){return e[2]||(e[2]=[(0,o.eW)("mdi-history")])})),_:1}),e[3]||(e[3]=(0,o.eW)(" Lịch sử đã xem "))]),(0,o.bF)(g,{class:"my-4"})]})),_:1})]})),_:1}),0===s.historyMovies.length?((0,o.uX)(),(0,o.Wv)(v,{key:0},{default:(0,o.k6)((function(){return[(0,o.bF)(m,{cols:"12",class:"text-center"},{default:(0,o.k6)((function(){return[(0,o.bF)(h,{type:"info",prominent:"",icon:"mdi-information-outline",color:"grey-darken-3",text:""},{default:(0,o.k6)((function(){return e[4]||(e[4]=[(0,o.eW)(" Bạn chưa có phim nào trong lịch sử xem. Hãy xem phim ngay để lưu lại! ")])})),_:1})]})),_:1})]})),_:1})):((0,o.uX)(),(0,o.Wv)(v,{key:1},{default:(0,o.k6)((function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.historyMovies,(function(t){return(0,o.uX)(),(0,o.Wv)(m,{key:t.slug,cols:"12",sm:"6",md:"4",lg:"3",class:"mb-4"},{default:(0,o.k6)((function(){var n;return[(0,o.bF)(F,{class:"history-card",to:"/movie/".concat(t.slug,"?tap=").concat(null===(n=t.episode)||void 0===n?void 0:n.slug),rounded:"lg"},{default:(0,o.k6)((function(){return[(0,o.bF)(k,{src:d.getOptimizedImage(t.poster_url),class:"history-poster",height:"300",cover:""},null,8,["src"]),(0,o.bF)(p,{class:"movie-title text-wrap"},{default:(0,o.k6)((function(){return[(0,o.eW)((0,r.v_)(t.name),1)]})),_:2},1024),(0,o.bF)(y,{class:"movie-info text-wrap"},{default:(0,o.k6)((function(){var e;return[null!==(e=t.episode)&&void 0!==e&&e.name?((0,o.uX)(),(0,o.CE)("span",a," Tập: "+(0,r.v_)(t.episode.name),1)):((0,o.uX)(),(0,o.CE)("span",u,(0,r.v_)(t.year),1))]})),_:2},1024),(0,o.bF)(_,{class:"d-flex justify-space-between align-center"},{default:(0,o.k6)((function(){var n;return[(0,o.bF)(b,{color:"orange",variant:"flat",small:"",to:"/movie/".concat(t.slug,"?tap=").concat(null===(n=t.episode)||void 0===n?void 0:n.slug)},{default:(0,o.k6)((function(){return[(0,o.bF)(f,{start:""},{default:(0,o.k6)((function(){return e[5]||(e[5]=[(0,o.eW)("mdi-play-circle-outline")])})),_:1}),e[6]||(e[6]=(0,o.eW)(" Tiếp tục "))]})),_:2},1032,["to"]),(0,o.bF)(b,{icon:"",variant:"text",color:"red",onClick:(0,i.D$)((function(e){return d.confirmDelete(t.slug)}),["stop","prevent"]),title:"Xóa khỏi lịch sử"},{default:(0,o.k6)((function(){return[(0,o.bF)(f,null,{default:(0,o.k6)((function(){return e[7]||(e[7]=[(0,o.eW)("mdi-trash-can-outline")])})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1032,["to"])]})),_:2},1024)})),128))]})),_:1})),(0,o.bF)(w,{modelValue:s.dialogDelete,"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.dialogDelete=t}),"max-width":"400"},{default:(0,o.k6)((function(){return[(0,o.bF)(F,{class:"bg-grey-darken-4 text-white"},{default:(0,o.k6)((function(){return[(0,o.bF)(p,{class:"text-h6"},{default:(0,o.k6)((function(){return e[8]||(e[8]=[(0,o.eW)("Xóa khỏi lịch sử")])})),_:1}),(0,o.bF)(x,null,{default:(0,o.k6)((function(){return e[9]||(e[9]=[(0,o.eW)("Bạn có chắc chắn muốn xóa phim này khỏi lịch sử xem?")])})),_:1}),(0,o.bF)(_,null,{default:(0,o.k6)((function(){return[(0,o.bF)(W),(0,o.bF)(b,{color:"grey",variant:"text",onClick:e[0]||(e[0]=function(t){return s.dialogDelete=!1})},{default:(0,o.k6)((function(){return e[10]||(e[10]=[(0,o.eW)("Hủy")])})),_:1}),(0,o.bF)(b,{color:"red-darken-2",variant:"text",onClick:d.deleteHistoryItem},{default:(0,o.k6)((function(){return e[11]||(e[11]=[(0,o.eW)("Xóa")])})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var s=n(91483),d={name:"HistoryPage",data:function(){return{historyMovies:[],dialogDelete:!1,movieToDeleteSlug:null,urlImage:s.l1}},mounted:function(){this.loadHistory()},methods:{loadHistory:function(){var t=JSON.parse(localStorage.getItem("watchHistory")||"[]");this.historyMovies=t.slice(0,20).sort((function(t,e){return e.timestamp-t.timestamp}))},confirmDelete:function(t){this.movieToDeleteSlug=t,this.dialogDelete=!0},deleteHistoryItem:function(){var t=this,e=JSON.parse(localStorage.getItem("watchHistory")||"[]"),n=e.filter((function(e){return e.slug!==t.movieToDeleteSlug}));localStorage.setItem("watchHistory",JSON.stringify(n)),this.loadHistory(),this.dialogDelete=!1},getOptimizedImage:function(t){return t&&t.startsWith("https://")?t:t?"".concat(this.urlImage).concat(encodeURIComponent(t),"&w=384&q=100"):"/placeholder.jpg"}}},f=n(71241);const g=(0,f.A)(d,[["render",c],["__scopeId","data-v-0785ecd3"]]);var m=g}}]);
//# sourceMappingURL=11-legacy.5ae7f81a.js.map