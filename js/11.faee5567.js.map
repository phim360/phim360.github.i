{"version":3,"file":"js/11.faee5567.js","mappings":"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","sources":["webpack://videosweb/./src/pages/HistoryPage.vue","webpack://videosweb/./src/pages/HistoryPage.vue?db42"],"sourcesContent":["<template>\n  <v-container>\n    <v-row class=\"mt-4 mb-4\">\n      <v-col cols=\"12\">\n        <h2 class=\"text-h4 font-weight-bold\">\n          <v-icon large color=\"primary\" class=\"mr-2\">mdi-history</v-icon>\n          Lịch sử đã xem\n        </h2>\n        <v-divider class=\"my-4\"></v-divider>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"historyMovies.length === 0\">\n      <v-col cols=\"12\" class=\"text-center\">\n        <v-alert\n          type=\"info\"\n          prominent\n          icon=\"mdi-information-outline\"\n          color=\"grey-darken-3\"\n          text\n        >\n          Bạn chưa có phim nào trong lịch sử xem. Hãy xem phim ngay để lưu lại!\n        </v-alert>\n      </v-col>\n    </v-row>\n\n    <v-row v-else>\n      <v-col\n        v-for=\"movie in historyMovies\"\n        :key=\"movie.slug\"\n        cols=\"12\"\n        sm=\"6\"\n        md=\"4\"\n        lg=\"3\"\n        class=\"mb-4\"\n      >\n        <v-card class=\"history-card\" :to=\"`/movie/${movie.slug}?tap=${movie.episode?.slug}`\" rounded=\"lg\">\n          <v-img\n            :src=\"getOptimizedImage(movie.poster_url)\"\n            class=\"history-poster\"\n            height=\"300\"\n            cover\n          ></v-img>\n\n          <v-card-title class=\"movie-title text-wrap\">{{ movie.name }}</v-card-title>\n          <v-card-subtitle class=\"movie-info text-wrap\">\n            <span v-if=\"movie.episode?.name\">\n              Tập: {{ movie.episode.name }}\n            </span>\n            <span v-else>\n              {{ movie.year }}\n            </span>\n          </v-card-subtitle>\n          \n          <v-card-actions class=\"d-flex justify-space-between align-center\">\n            <v-btn\n              color=\"orange\"\n              variant=\"flat\"\n              small\n              :to=\"`/movie/${movie.slug}?tap=${movie.episode?.slug}`\"\n            >\n              <v-icon start>mdi-play-circle-outline</v-icon>\n              Tiếp tục\n            </v-btn>\n\n            <v-btn\n              icon\n              variant=\"text\"\n              color=\"red\"\n              @click.stop.prevent=\"confirmDelete(movie.slug)\"\n              title=\"Xóa khỏi lịch sử\"\n            >\n              <v-icon>mdi-trash-can-outline</v-icon>\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n    \n    <v-dialog v-model=\"dialogDelete\" max-width=\"400\">\n      <v-card class=\"bg-grey-darken-4 text-white\">\n        <v-card-title class=\"text-h6\">Xóa khỏi lịch sử</v-card-title>\n        <v-card-text>Bạn có chắc chắn muốn xóa phim này khỏi lịch sử xem?</v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"grey\" variant=\"text\" @click=\"dialogDelete = false\">Hủy</v-btn>\n          <v-btn color=\"red-darken-2\" variant=\"text\" @click=\"deleteHistoryItem\">Xóa</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { urlImage } from '@/model/api';\n\nexport default {\n  name: 'HistoryPage',\n  data() {\n    return {\n      historyMovies: [],\n      dialogDelete: false,\n      movieToDeleteSlug: null,\n      urlImage: urlImage,\n    };\n  },\n  mounted() {\n    this.loadHistory();\n  },\n  methods: {\n    loadHistory() {\n      const history = JSON.parse(localStorage.getItem('watchHistory') || '[]');\n      // Giới hạn lịch sử tối đa 20 phim và sắp xếp theo thời gian mới nhất\n      this.historyMovies = history.slice(0, 20).sort((a, b) => b.timestamp - a.timestamp);\n    },\n    confirmDelete(slug) {\n      this.movieToDeleteSlug = slug;\n      this.dialogDelete = true;\n    },\n    deleteHistoryItem() {\n      let history = JSON.parse(localStorage.getItem('watchHistory') || '[]');\n      const updatedHistory = history.filter(item => item.slug !== this.movieToDeleteSlug);\n      localStorage.setItem('watchHistory', JSON.stringify(updatedHistory));\n      this.loadHistory(); // Cập nhật lại danh sách\n      this.dialogDelete = false;\n    },\n    getOptimizedImage(imagePath) {\n      if (imagePath && imagePath.startsWith('https://')) {\n          return imagePath;\n      }\n      return imagePath ? `${this.urlImage}${encodeURIComponent(imagePath)}&w=384&q=100` : '/placeholder.jpg';\n    },\n  },\n};\n</script>\n\n<style scoped>\n.history-card {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  background-color: #212121 !important;\n  color: white;\n}\n\n.history-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);\n}\n\n.history-poster {\n  border-bottom: 2px solid #ffcc00;\n}\n\n.movie-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  line-height: 1.2;\n}\n\n.movie-info {\n  font-size: 0.9rem;\n  color: #a0a0a0;\n}\n.text-wrap {\n  white-space: normal !important;\n  overflow-wrap: break-word;\n}\n</style>\n","import { render } from \"./HistoryPage.vue?vue&type=template&id=0785ecd3&scoped=true\"\nimport script from \"./HistoryPage.vue?vue&type=script&lang=js\"\nexport * from \"./HistoryPage.vue?vue&type=script&lang=js\"\n\nimport \"./HistoryPage.vue?vue&type=style&index=0&id=0785ecd3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0785ecd3\"]])\n\nexport default __exports__"],"names":["class","key","_createBlock","_component_v_container","default","_withCtx","_createVNode","_component_v_row","_component_v_col","cols","_createElementVNode","_hoisted_1","_component_v_icon","large","color","_cache","_createTextVNode","_","_component_v_divider","$data","historyMovies","length","_component_v_alert","type","prominent","icon","text","_createElementBlock","_Fragment","_renderList","movie","slug","sm","md","lg","_movie$episode","_component_v_card","to","episode","rounded","_component_v_img","src","$options","getOptimizedImage","poster_url","height","cover","_component_v_card_title","_toDisplayString","name","_component_v_card_subtitle","_movie$episode2","_hoisted_2","_hoisted_3","year","_component_v_card_actions","_movie$episode3","_component_v_btn","variant","small","start","onClick","_withModifiers","$event","confirmDelete","title","_component_v_dialog","modelValue","dialogDelete","_component_v_card_text","_component_v_spacer","deleteHistoryItem","data","movieToDeleteSlug","urlImage","mounted","this","loadHistory","methods","history","JSON","parse","localStorage","getItem","slice","sort","a","b","timestamp","updatedHistory","filter","item","setItem","stringify","imagePath","startsWith","encodeURIComponent","__exports__","render"],"sourceRoot":""}