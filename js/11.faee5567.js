"use strict";(self["webpackChunkvideosweb"]=self["webpackChunkvideosweb"]||[]).push([[11],{3011:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});var a=l(6768),o=l(4232),i=l(5130);const s={class:"text-h4 font-weight-bold"},r={key:0},n={key:1};function d(e,t,l,d,c,u){const g=(0,a.g2)("v-icon"),m=(0,a.g2)("v-divider"),v=(0,a.g2)("v-col"),h=(0,a.g2)("v-row"),k=(0,a.g2)("v-alert"),f=(0,a.g2)("v-img"),p=(0,a.g2)("v-card-title"),y=(0,a.g2)("v-card-subtitle"),b=(0,a.g2)("v-btn"),_=(0,a.g2)("v-card-actions"),F=(0,a.g2)("v-card"),x=(0,a.g2)("v-card-text"),W=(0,a.g2)("v-spacer"),w=(0,a.g2)("v-dialog"),D=(0,a.g2)("v-container");return(0,a.uX)(),(0,a.Wv)(D,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"mt-4 mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.Lk)("h2",s,[(0,a.bF)(g,{large:"",color:"primary",class:"mr-2"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("mdi-history")]))),_:1}),t[3]||(t[3]=(0,a.eW)(" Lịch sử đã xem "))]),(0,a.bF)(m,{class:"my-4"})])),_:1})])),_:1}),0===c.historyMovies.length?((0,a.uX)(),(0,a.Wv)(h,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(v,{cols:"12",class:"text-center"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"info",prominent:"",icon:"mdi-information-outline",color:"grey-darken-3",text:""},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)(" Bạn chưa có phim nào trong lịch sử xem. Hãy xem phim ngay để lưu lại! ")]))),_:1})])),_:1})])),_:1})):((0,a.uX)(),(0,a.Wv)(h,{key:1},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.historyMovies,(e=>((0,a.uX)(),(0,a.Wv)(v,{key:e.slug,cols:"12",sm:"6",md:"4",lg:"3",class:"mb-4"},{default:(0,a.k6)((()=>{var l;return[(0,a.bF)(F,{class:"history-card",to:`/movie/${e.slug}?tap=${null===(l=e.episode)||void 0===l?void 0:l.slug}`,rounded:"lg"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{src:u.getOptimizedImage(e.poster_url),class:"history-poster",height:"300",cover:""},null,8,["src"]),(0,a.bF)(p,{class:"movie-title text-wrap"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.name),1)])),_:2},1024),(0,a.bF)(y,{class:"movie-info text-wrap"},{default:(0,a.k6)((()=>{var t;return[null!==(t=e.episode)&&void 0!==t&&t.name?((0,a.uX)(),(0,a.CE)("span",r," Tập: "+(0,o.v_)(e.episode.name),1)):((0,a.uX)(),(0,a.CE)("span",n,(0,o.v_)(e.year),1))]})),_:2},1024),(0,a.bF)(_,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((()=>{var l;return[(0,a.bF)(b,{color:"orange",variant:"flat",small:"",to:`/movie/${e.slug}?tap=${null===(l=e.episode)||void 0===l?void 0:l.slug}`},{default:(0,a.k6)((()=>[(0,a.bF)(g,{start:""},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("mdi-play-circle-outline")]))),_:1}),t[6]||(t[6]=(0,a.eW)(" Tiếp tục "))])),_:2},1032,["to"]),(0,a.bF)(b,{icon:"",variant:"text",color:"red",onClick:(0,i.D$)((t=>u.confirmDelete(e.slug)),["stop","prevent"]),title:"Xóa khỏi lịch sử"},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("mdi-trash-can-outline")]))),_:1})])),_:2},1032,["onClick"])]})),_:2},1024)])),_:2},1032,["to"])]})),_:2},1024)))),128))])),_:1})),(0,a.bF)(w,{modelValue:c.dialogDelete,"onUpdate:modelValue":t[1]||(t[1]=e=>c.dialogDelete=e),"max-width":"400"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{class:"bg-grey-darken-4 text-white"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"text-h6"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("Xóa khỏi lịch sử")]))),_:1}),(0,a.bF)(x,null,{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)("Bạn có chắc chắn muốn xóa phim này khỏi lịch sử xem?")]))),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(W),(0,a.bF)(b,{color:"grey",variant:"text",onClick:t[0]||(t[0]=e=>c.dialogDelete=!1)},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)("Hủy")]))),_:1}),(0,a.bF)(b,{color:"red-darken-2",variant:"text",onClick:u.deleteHistoryItem},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("Xóa")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var c=l(1483),u={name:"HistoryPage",data(){return{historyMovies:[],dialogDelete:!1,movieToDeleteSlug:null,urlImage:c.l1}},mounted(){this.loadHistory()},methods:{loadHistory(){const e=JSON.parse(localStorage.getItem("watchHistory")||"[]");this.historyMovies=e.slice(0,20).sort(((e,t)=>t.timestamp-e.timestamp))},confirmDelete(e){this.movieToDeleteSlug=e,this.dialogDelete=!0},deleteHistoryItem(){let e=JSON.parse(localStorage.getItem("watchHistory")||"[]");const t=e.filter((e=>e.slug!==this.movieToDeleteSlug));localStorage.setItem("watchHistory",JSON.stringify(t)),this.loadHistory(),this.dialogDelete=!1},getOptimizedImage(e){return e&&e.startsWith("https://")?e:e?`${this.urlImage}${encodeURIComponent(e)}&w=384&q=100`:"/placeholder.jpg"}}},g=l(1241);const m=(0,g.A)(u,[["render",d],["__scopeId","data-v-0785ecd3"]]);var v=m}}]);
//# sourceMappingURL=11.faee5567.js.map