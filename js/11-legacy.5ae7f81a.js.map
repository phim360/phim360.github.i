{"version":3,"file":"js/11-legacy.5ae7f81a.js","mappings":"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","sources":["webpack://videosweb/./src/pages/HistoryPage.vue","webpack://videosweb/./src/pages/HistoryPage.vue?db42"],"sourcesContent":["<template>\n  <v-container>\n    <v-row class=\"mt-4 mb-4\">\n      <v-col cols=\"12\">\n        <h2 class=\"text-h4 font-weight-bold\">\n          <v-icon large color=\"primary\" class=\"mr-2\">mdi-history</v-icon>\n          Lịch sử đã xem\n        </h2>\n        <v-divider class=\"my-4\"></v-divider>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"historyMovies.length === 0\">\n      <v-col cols=\"12\" class=\"text-center\">\n        <v-alert\n          type=\"info\"\n          prominent\n          icon=\"mdi-information-outline\"\n          color=\"grey-darken-3\"\n          text\n        >\n          Bạn chưa có phim nào trong lịch sử xem. Hãy xem phim ngay để lưu lại!\n        </v-alert>\n      </v-col>\n    </v-row>\n\n    <v-row v-else>\n      <v-col\n        v-for=\"movie in historyMovies\"\n        :key=\"movie.slug\"\n        cols=\"12\"\n        sm=\"6\"\n        md=\"4\"\n        lg=\"3\"\n        class=\"mb-4\"\n      >\n        <v-card class=\"history-card\" :to=\"`/movie/${movie.slug}?tap=${movie.episode?.slug}`\" rounded=\"lg\">\n          <v-img\n            :src=\"getOptimizedImage(movie.poster_url)\"\n            class=\"history-poster\"\n            height=\"300\"\n            cover\n          ></v-img>\n\n          <v-card-title class=\"movie-title text-wrap\">{{ movie.name }}</v-card-title>\n          <v-card-subtitle class=\"movie-info text-wrap\">\n            <span v-if=\"movie.episode?.name\">\n              Tập: {{ movie.episode.name }}\n            </span>\n            <span v-else>\n              {{ movie.year }}\n            </span>\n          </v-card-subtitle>\n          \n          <v-card-actions class=\"d-flex justify-space-between align-center\">\n            <v-btn\n              color=\"orange\"\n              variant=\"flat\"\n              small\n              :to=\"`/movie/${movie.slug}?tap=${movie.episode?.slug}`\"\n            >\n              <v-icon start>mdi-play-circle-outline</v-icon>\n              Tiếp tục\n            </v-btn>\n\n            <v-btn\n              icon\n              variant=\"text\"\n              color=\"red\"\n              @click.stop.prevent=\"confirmDelete(movie.slug)\"\n              title=\"Xóa khỏi lịch sử\"\n            >\n              <v-icon>mdi-trash-can-outline</v-icon>\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n    \n    <v-dialog v-model=\"dialogDelete\" max-width=\"400\">\n      <v-card class=\"bg-grey-darken-4 text-white\">\n        <v-card-title class=\"text-h6\">Xóa khỏi lịch sử</v-card-title>\n        <v-card-text>Bạn có chắc chắn muốn xóa phim này khỏi lịch sử xem?</v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"grey\" variant=\"text\" @click=\"dialogDelete = false\">Hủy</v-btn>\n          <v-btn color=\"red-darken-2\" variant=\"text\" @click=\"deleteHistoryItem\">Xóa</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { urlImage } from '@/model/api';\n\nexport default {\n  name: 'HistoryPage',\n  data() {\n    return {\n      historyMovies: [],\n      dialogDelete: false,\n      movieToDeleteSlug: null,\n      urlImage: urlImage,\n    };\n  },\n  mounted() {\n    this.loadHistory();\n  },\n  methods: {\n    loadHistory() {\n      const history = JSON.parse(localStorage.getItem('watchHistory') || '[]');\n      // Giới hạn lịch sử tối đa 20 phim và sắp xếp theo thời gian mới nhất\n      this.historyMovies = history.slice(0, 20).sort((a, b) => b.timestamp - a.timestamp);\n    },\n    confirmDelete(slug) {\n      this.movieToDeleteSlug = slug;\n      this.dialogDelete = true;\n    },\n    deleteHistoryItem() {\n      let history = JSON.parse(localStorage.getItem('watchHistory') || '[]');\n      const updatedHistory = history.filter(item => item.slug !== this.movieToDeleteSlug);\n      localStorage.setItem('watchHistory', JSON.stringify(updatedHistory));\n      this.loadHistory(); // Cập nhật lại danh sách\n      this.dialogDelete = false;\n    },\n    getOptimizedImage(imagePath) {\n      if (imagePath && imagePath.startsWith('https://')) {\n          return imagePath;\n      }\n      return imagePath ? `${this.urlImage}${encodeURIComponent(imagePath)}&w=384&q=100` : '/placeholder.jpg';\n    },\n  },\n};\n</script>\n\n<style scoped>\n.history-card {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  background-color: #212121 !important;\n  color: white;\n}\n\n.history-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);\n}\n\n.history-poster {\n  border-bottom: 2px solid #ffcc00;\n}\n\n.movie-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  line-height: 1.2;\n}\n\n.movie-info {\n  font-size: 0.9rem;\n  color: #a0a0a0;\n}\n.text-wrap {\n  white-space: normal !important;\n  overflow-wrap: break-word;\n}\n</style>\n","import { render } from \"./HistoryPage.vue?vue&type=template&id=0785ecd3&scoped=true\"\nimport script from \"./HistoryPage.vue?vue&type=script&lang=js\"\nexport * from \"./HistoryPage.vue?vue&type=script&lang=js\"\n\nimport \"./HistoryPage.vue?vue&type=style&index=0&id=0785ecd3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0785ecd3\"]])\n\nexport default __exports__"],"names":["class","key","_createBlock","_component_v_container","default","_withCtx","_createVNode","_component_v_row","_component_v_col","cols","_createElementVNode","_hoisted_1","_component_v_icon","large","color","_cache","_createTextVNode","_","_component_v_divider","$data","historyMovies","length","_component_v_alert","type","prominent","icon","text","_createElementBlock","_Fragment","_renderList","movie","slug","sm","md","lg","_movie$episode","_component_v_card","to","concat","episode","rounded","_component_v_img","src","$options","getOptimizedImage","poster_url","height","cover","_component_v_card_title","_toDisplayString","name","_component_v_card_subtitle","_movie$episode2","_hoisted_2","_hoisted_3","year","_component_v_card_actions","_movie$episode3","_component_v_btn","variant","small","start","onClick","_withModifiers","$event","confirmDelete","title","_component_v_dialog","modelValue","dialogDelete","_component_v_card_text","_component_v_spacer","deleteHistoryItem","data","movieToDeleteSlug","urlImage","mounted","this","loadHistory","methods","history","JSON","parse","localStorage","getItem","slice","sort","a","b","timestamp","_this","updatedHistory","filter","item","setItem","stringify","imagePath","startsWith","encodeURIComponent","__exports__","render"],"sourceRoot":""}